<!doctype html>
<html lang="en" ng-app="basta">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta http-equiv="content-type" content="text/html;charset=utf-8"/>
    <title>basta</title>>
    <link rel="stylesheet" href="css/bundle.css"/>
</head>

<body id="body" ng-controller="mainController">
<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#/dssdfsdf">
               <span class="fa fa-cubes"></span>
                basta</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right" ng-hide="userForm">
                <li>
                          <a ng-show="currentUser.authenticated" class="tooltipped" data-toggle="tooltip" data-placement="bottom" title="">
                              <i class="fa fa-user"></i>
                              {{ currentUser.displayName }}
                          </a>
                            <div class="tooltip-content hide">
                                <div class="panel-group">
                                    <div class="panel panel-primary">
                                        <div class="panel-heading">Roller</div>
                                        <div class="panel-content">
                                            <div ng-repeat="role in currentUser.roles">
                                                <strong><span class="text-info">{{role}}</span></strong>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-primary">
                                        <div class="panel-heading">Tilganger</div>
                                        <div class="panel-content">
                                            <div ng-repeat="ec in currentUser.environmentClasses">
                                                <strong><span class="text-info">{{ec}}</span></strong>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-show="currentUser.superUser" class="panel panel-primary">
                                        <div class="panel-heading">Superuser</div>
                                        <div class="panel-content">
                                            <h1 class="text-success"><i class="fa fa-2x fa-thumbs-up"></i></h1>
                                        </div>
                                    </div>
                                </div>
                            </div>

                    <a ng-hide="currentUser.authenticated">Not logged in</a>
                </li>
                <li ng-hide="currentUser.authenticated">
                    <a ng-click="showLogin()">Log<u>i</u>n</a>
                </li>
                <li ng-show="currentUser.authenticated">
                    <a ng-click="logout()" >Log out</a>
                </li>
            </ul>
            <form ng-show="userForm" ng-submit="login()" class="navbar-form navbar-right"
                  role="login">
                <div class="form-group">
                    <input id="login_username" placeholder="User name" type="text" autofocus
                           ng-model="userForm.username" class="form-control"/>
                    <input placeholder="Password" type="password" ng-model="userForm.password" class="form-control"/>
                    <input type="submit" class="btn btn-sm btn-primary" value="Login"/>
                </div>
            </form>
        </div>
        <!--/.nav-collapse -->
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-sm-1 col-md-1 sidebar">
            <ul class="nav nav-sidebar">

                <li ng-class="{ active: location.path().match('menu$') }" ng-hide="!currentUser.authenticated || isAnyBlockingNotifications">
                    <a href="#/menu"><i class="fa fa-plus"></i> Create</a>
                </li>
                <li ng-class="{ active: location.path().match('order_list$') }">
                    <a href="#/order_list"><i class="fa fa-history"></i> Order history</a>
                </li>
                <li ng-class="{ active: location.path().match('decommision$') }" ng-hide="!currentUser.superUser">
                    <a href="#/decommision"><i class="fa fa-wrench"></i> Operations</a>
                </li>
                <li ng-class="{ active: location.path().match('notifications$') }" ng-hide="!currentUser.superUser">
                    <a href="#/notifications"><i class="fa fa-flag"></i> Notifications</a>
                </li>

            </ul>
        </div>
        <div class="col-md-11 col-md-offset-1 main">
            <div class="alert alert-danger" ng-hide="isObjectEmpty(errors)" ng-controller="errorController">
                <p ng-repeat="(name, error) in errors"><strong>{{name}}</strong> {{error.message}} <br/>
                    {{error.description}}</p>
            </div>
            <div ng-repeat="note in notifications">
                 <div ng-hide="notifications.length===0"  ng-class="{
                                            'alert alert-danger' : note.blockOperations === true,
                                            'alert alert-warning' : note.blockOperations === false}">

                     <h5>
                         <i class="fa fa-2x fa-a"ng-class="{'fa-warning': note.blockOperations === true,'fa-info-circle': note.blockOperations === false}"></i>
                         {{note.message}}
                     </h5>
                     <span class="pull-right">
                             Created by {{note.createdByDisplayName}} {{note.created|timeago}}
                      </span>
                      </span>


                </div>
            </div>
            <div class="main" ng-view></div>
        </div>
    </div>
</div>


<div class="navbar navbar-default navbar-fixed-bottom">
    <div class="container-fluid">
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li>
                    <span class="navbar-text">Version: <a href="/#/changelog?version={{version}}">{{version}}</a></span>
                </li>
                <li>
                     <span class="navbar-text">
                    <a class="tooltipped" data-toggle="tooltip" data-placement="top">
                        <i class="fa fa-database"></i>
                        DB
                    </a>
                    <div class="tooltip-content hide">
                        <div class="panel panel-primary">
                            <div class="panel-heading">Database</div>
                            <div class="panel-content">
                                <div>
                                    <h5 class=" text-primary break-word">{{datasource}}</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                         </span>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-link navbar-right">
                <li>
                    <span class="navbar-text">
                        <a target="_blank" href="http://confluence.adeo.no/pages/viewpage.action?pageId=40141088">
                            <i class="fa fa-thumbs-up"></i> Feedback</a>
                    </span>
                </li>
            </ul>
        </div>
    </div>
</div>


<script src="js/basta.js"></script>
</body>
</html>