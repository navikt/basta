<div ng-controller="nodeListController">
	<h1>Noder</h1>
	<form class="well" ng-show="selectedNodes")>
		<table>
			<tr>
				<td><button type="button" class="btn btn-small">Dekommisjoner</button></td>
				<td>&nbsp;</td>
				<td><span ng-repeat="node in selectedNodes">{{node.hostname}}{{$last ? '' : ', '}}</span></td>
			</tr>
		</table> 
	</form>
	<form class="well">
		<i class="icon-filter"></i> Filter: 
		<button type="button" class="btn btn-small" ng-disabled="!currentUser.authenticated" ng-click="filters.myNodes = !filters.myNodes" ng-class="{active: filters.myNodes}">Mine</button>
		<button type="button" class="btn btn-small" ng-click="filters.activeNodes = !filters.activeNodes" ng-class="{active: filters.activeNodes}">Aktive</button>
	</form>
	<table class="table table-striped" ng-init="predicate = 'id'; reverse = true">
		<thead>
			<tr>
				<td><a ng-click="reverse = predicate == (predicate = 'order.id') && !reverse">Ordre#</a></td>
				<td><a ng-click="reverse = predicate == (predicate = 'hostname') && !reverse">Hostnavn</a></td>
				<td><a ng-click="reverse = predicate == (predicate = 'order.createdBy') && !reverse">Opprettet av</a></td>
				<td><a ng-click="reverse = predicate == (predicate = 'created') && !reverse">Tidspunkt</a></td>
				<td><a ng-click="reverse = predicate == (predicate = 'order.status') && !reverse">Status</a></td>
				<td><a ng-click="reverse = predicate == (predicate = 'decommissioned') && !reverse">Dekommisjonert</a></td>
			</tr>
		</thead>
		<tbody>
			<tr ng-class="{info: isSelectedNode(node)}" ng-repeat="node in nodes | orderBy:predicate:reverse" ng-click="setSelectedNode(node)">
				<td>{{node.order.id}}</td>
				<td>{{node.hostname}}</td>
				<td>{{node.order.createdBy}}</td>
				<td>{{node.created|date:'yyyy-MM-dd HH:mm:ss'}}</td>
				<td>{{node.order.status}}</td>
				<td>{{node.decommissioned}}</td>
			</tr>
		</tbody>
	</table>
</div>
