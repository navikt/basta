<span ng-controller="orderformOpenAMController as ctrl">
	<orderform image="'openam.png'" header="'OpenAM '" description="'Server'">
        <form novalidate class="form-horizontal" role="form" name="form">

            <orderform-environment-classes
                    model="ctrl.data.environmentClass"
                    on-select="ctrl.changeEnvironmentClass()">
            </orderform-environment-classes>
            <orderform-environments
                    model="ctrl.data.environmentName"
                    env-class-key="ctrl.data.environmentClass"
                    show-validation="form.$submitted"
                    on-select="ctrl.changeEnvironment()">
            </orderform-environments>
            <orderform-applications
                    model="ctrl.data.applicationMappingName"
                    applications-only="false"
                    show-validation="form.$submitted">
            </orderform-applications>
            <orderform-dropdown
                    model="ctrl.data.serverCount"
                    label="'Antall servere'"
                    choices="ctrl.choices.serverCount"
                    show-validation="form.$submitted">
            </orderform-dropdown>
            <orderform-dropdown
                    model="ctrl.data.cpuCount"
                    label="'Antall cpu'"
                    choices="[1, 2, 3, 4]"
                    show-validation="form.$submitted">
            </orderform-dropdown>

            <orderform-dropdown
                    model="ctrl.data.memory"
                    label="'Minne'"
                    choices="ctrl.choices.memory"
                    choice-suffix="'G'"
                    show-validation="form.$submitted">
            </orderform-dropdown>

            <orderform-buttons
                    on-submit="ctrl.submitOrder()"
                    formvalid="form.$valid">
            </orderform-buttons>
        </form>
    </orderform>
	<div class="col-sm-2">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <i class="fa fa-calculator"></i> Estimert kostnad
            </div>

            <div class="panel-body">
                <h3>{{ctrl.estimatedPrice() | number: 0 }}</h3>
            </div>
        </div>
    </div>
    <div >
        <pre>{{ctrl.data | json}}</pre>
    </div>
</span>
